/* Document Base Styles */

.document {
  font-family: var(--font-serif);
  font-size: 0.875rem;
  color: var(--foreground);
  text-rendering: optimizeLegibility;

  /* LaTeX-like justification */
  text-align: justify;
  text-justify: inter-word;

  /* Only break words as a last resort */
  overflow-wrap: break-word;
  word-break: normal;
}

/* Remove extra space at bottom */
.document>*:last-child {
  margin-bottom: 0 !important;
}

.document .footnote-ref {
  display: inline-block;
  font-weight: bold;
  font-size: 1rem;
  line-height: 0;
  position: relative;
  bottom: -0.125rem;
  left: -0.125rem;
}

/* Typography - Headings */

.document h1,
.document h2,
.document h3,
.document h4,
.document h5,
.document h6 {
  text-align: left;
}

.document h1 .header-section-number,
.document h2 .header-section-number,
.document h3 .header-section-number {
  display: none;
}

.document h1 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 0.75rem;
  border-bottom: 1px solid var(--border);
  margin-top: 0.75rem;
}

.document h2 {
  font-size: 1.0625rem;
  font-weight: 700;
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
  border-bottom: 1px solid var(--border);
}

.document h3 {
  font-size: 0.9375rem;
  font-weight: 700;
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
  border-bottom: 1px solid var(--border);
}

.document h4 {
  font-size: 0.875rem;
  font-weight: 700;
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
  border-bottom: 1px solid var(--border);
}

.document h5 {
  font-size: 0.875rem;
  font-weight: 700;
  margin-top: 0.75rem;
  margin-bottom: 0.5rem;
  padding-bottom: 0.25rem;
  border-bottom: 1px solid var(--border);
}

.document h6 {
  font-size: 0.875rem;
  font-weight: 700;
  font-style: italic;
  margin-top: 0.75rem;
  margin-bottom: 0.5rem;
  padding-bottom: 0.25rem;
  border-bottom: 1px solid var(--border);
}

/* Heading spacing adjustments */
.document h1~h1 {
  margin-top: 2rem;
}

.document h1+h2,
.document h2+h3,
.document h3+h4,
.document h4+h5,
.document h5+h6 {
  margin-top: 0.5rem;
}

.document h1+p,
.document h2+p,
.document h3+p,
.document h4+p,
.document h5+p,
.document h6+p {
  margin-top: 0.5rem;
}

/* Typography - Inline Elements */

.document p {
  margin-top: 0.5rem;
}

.document strong {
  font-weight: 700;
}

.document em {
  font-style: italic;
}

.document a,
.document a:visited {
  color: var(--primary);
  text-decoration: underline;
  text-decoration-skip-ink: auto;
  cursor: pointer;
}

.document a:hover {
  color: var(--primary);
  opacity: 0.8;
}

/* Code and Preformatted Text */

.document code,
.document pre,
.document kbd {
  font-family: var(--font-mono);
  hyphens: none;
  scrollbar-width: none;
  /* Firefox */
  -ms-overflow-style: none;
  /* IE and Edge */
}

.document code::-webkit-scrollbar,
.document pre::-webkit-scrollbar,
.document kbd::-webkit-scrollbar {
  display: none;
  /* Chrome, Safari, Opera */
}

.document pre {
  margin: 1rem 0;
  padding: 0.75rem;
  max-width: 100%;
  overflow: auto;
  border-radius: 0.25rem;
  background: var(--muted);
}

/* Pandoc Syntax Highlighting */
.document code span.kw {
  color: #d73a49;
  font-weight: 600;
}

/* Keywords - red */
.document code span.dt {
  color: #6f42c1;
  font-weight: 500;
}

/* Data types - purple */
.document code span.dv {
  color: #005cc5;
}

/* Decimal values - blue */
.document code span.bn {
  color: #005cc5;
}

/* Base-n integers - blue */
.document code span.fl {
  color: #005cc5;
}

/* Floats - blue */
.document code span.ch {
  color: #032f62;
}

/* Characters - dark blue */
.document code span.st {
  color: #032f62;
}

/* Strings - dark blue */
.document code span.co {
  color: #6a737d;
  font-style: italic;
}

/* Comments - gray */
.document code span.ot {
  color: #6f42c1;
}

/* Other token - purple */
.document code span.al {
  color: #b31d28;
  font-weight: bold;
}

/* Alert - dark red */
.document code span.fu {
  color: #6f42c1;
}

/* Functions - purple */
.document code span.er {
  color: #b31d28;
  font-weight: bold;
}

/* Errors - dark red */
.document code span.wa {
  color: #e36209;
  font-style: italic;
}

/* Warnings - orange */
.document code span.cn {
  color: #005cc5;
}

/* Constants - blue */
.document code span.sc {
  color: #032f62;
}

/* Special characters - dark blue */
.document code span.vs {
  color: #032f62;
}

/* Verbatim strings - dark blue */
.document code span.ss {
  color: #032f62;
}

/* Special strings - dark blue */
.document code span.im {
  color: #d73a49;
}

/* Imports - red */
.document code span.va {
  color: #e36209;
}

/* Variables - orange */
.document code span.cf {
  color: #d73a49;
  font-weight: 600;
}

/* Control flow - red */
.document code span.op {
  color: #d73a49;
}

/* Operators - red */
.document code span.bu {
  color: #005cc5;
}

/* Built-ins - blue */
.document code span.ex {
  color: #005cc5;
}

/* Extensions - blue */
.document code span.pp {
  color: #d73a49;
}

/* Preprocessor - red */
.document code span.at {
  color: #6f42c1;
}

/* Attributes - purple */
.document code span.do {
  color: #6a737d;
  font-style: italic;
}

/* Documentation - gray */
.document code span.an {
  color: #6a737d;
  font-style: italic;
}

/* Annotations - gray */
.document code span.cv {
  color: #6a737d;
  font-style: italic;
}

/* Comments (verbose) - gray */
.document code span.in {
  color: #6a737d;
  font-style: italic;
}

/* Information - gray */

.document kbd {
  padding: 0.125rem 0.25rem;
  background: var(--background);
  border: 1px solid var(--border);
  border-radius: 0.125rem;
}

/* Lists */

.document ol,
.document ul {
  padding-left: 2rem;
}

.document ul {
  list-style-type: disc;
}

.document ol {
  list-style-type: decimal;
}

.document li {
  margin-top: 0.5rem;
}

/* Level 2 and Level 3 list items have reduced spacing */
.document li li {
  margin-top: 0.25rem;
}

/* Blockquotes */

.document blockquote {
  margin: 0.5rem 0;
  padding-left: 1rem;
  border-left: 3px solid var(--border);
  font-style: italic;
}

/* Horizontal Rules */

.document hr {
  margin: 1.5rem 0;
  border: none;
  border-top: 1px solid var(--border);
}

/* Images */

.document img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 1rem 0;
}

/* Figures */

.document figure {
  margin: 1rem 0;
  counter-increment: figcaption;
}

.document figcaption {
  margin-top: 0.5rem;
  padding: 0.25rem;
  width: 100%;
  font-size: 0.875rem;
  text-align: left;
}

.document figcaption::before {
  content: "Figure " counter(figcaption) ". ";
  font-weight: 700;
}

/* Tables */

.document table {
  display: block;
  width: 100%;
  max-width: 100%;
  margin: 1rem auto;
  overflow-x: auto;
  overflow-y: hidden;
  border-collapse: collapse;
  border-spacing: 0;
  table-layout: fixed;
  counter-increment: caption;
}

.document thead {
  width: 100%;
  max-width: 100%;
}

.document th,
.document td {
  padding: 0.5rem;
  text-align: left;
  white-space: normal;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.document table tr>th[scope="col"] {
  border-bottom: 1px solid var(--border);
}

.document table tr>th[scope="row"] {
  border-right: 1px solid var(--border);
}

.document table>tbody>tr:first-child>td,
.document table>tbody>tr:first-child>th {
  border-top: 1px solid var(--border);
}

.document caption {
  width: 100%;
  margin-top: 0.5rem;
  padding: 0.25rem;
  text-align: left;
}

.document caption::before {
  content: "Table " counter(caption) ". ";
  font-weight: 700;
}

/* Mathematical Expressions */

math {
  font-size: 111.46%;
}

.document math[display="block"] {
  width: 100%;
  max-width: 100%;
  margin: 0.5rem 0;
  padding: 0.25rem 0;
  overflow-x: auto;
  overflow-y: hidden;
  font-size: 111.46%;
}

.document math:not([display="block"]) {
  font-size: 111.46%;
}

.document p:has(math[display="block"]) {
  max-width: 100%;
}

/* Mobile Fullscreen Support */

/* Safe area support for iOS devices (notch, home indicator) */
.safe-area-fullscreen {
  /* Support for viewport-fit=cover in iOS */
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);

  /* Prevent overscroll/bounce effects on iOS */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;

  /* Disable touch callout on iOS (long-press menu) */
  -webkit-touch-callout: none;
}

/* Ensure proper height calculation on mobile browsers */
@supports (height: 100dvh) {
  .safe-area-fullscreen {
    height: 100dvh !important;
  }
}

/* Fallback for older browsers */
@supports not (height: 100dvh) {
  .safe-area-fullscreen {
    height: 100vh !important;
    height: calc(100vh - env(safe-area-inset-bottom)) !important;
  }
}